\psset{xunit=1pt,yunit=1pt,runit=1pt}
\begin{pspicture}(0,0)(350,350)
{
\begin{small}
	
	% temporary
	% \psframe[linestyle=dashed](0,0)(350,350)
	
	% Client A
	\psframe[framearc=1, cornersize=absolute, linearc=10pt]( 50,320)(150,350)
	\uput[90](100,325){Client \textsc{A} (ServiceAPI)}
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](100,320)(100,290)
	\uput[0](100,310){HTTP Request}
	
	% Client B
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](200,320)(300,350)
	\uput[90](250,325){Client \textsc{B} (ServiceAPI)}
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](250,320)(250,290)
	\uput[0](250,310){HTTP Request}
	
	% Server / Client boundary
	\uput[0](0,310){Client-side}
	\psline[linewidth=0.6pt, linestyle=dashed](0,300)(350,300)
	\uput[0](0,290){Server-side}
	
	% django
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](50,230)(300,290)
	\uput[90](143,268){Web API}
	\uput[-90](143,273){(django/piston)}
	
	% ROS boundary
	\psframe[linestyle=dotted](10,0)(340,250)
	\uput[-45](10,250){ROS}
	
	% django HTML
	\psframe[framearc=1, cornersize=absolute, linearc=10pt, fillstyle=solid, linestyle=dashed](55,235)(105,285)
	\uput[90](80,269){Service}
	\uput[90]{90}(70,235){\textsc{get}}
	\uput[90]{90}(90,235){\textsc{post}}
	
	\psframe[framearc=1, cornersize=absolute, linearc=10pt, fillstyle=solid, linestyle=dashed](180,235)(240,285)
	\uput[90](210,269){Environment}
	\uput[90]{90}(195,235){\textsc{delete}}
	\uput[90]{90}(210,235){\textsc{get}}
	\uput[90]{90}(225,235){\textsc{post}}
	
	\psframe[framearc=1, cornersize=absolute, linearc=10pt, fillstyle=solid, linestyle=dashed](245,235)(295,285)
	\uput[90](270,269){Task}
	\uput[90]{90}(260,235){\textsc{get}}
	\uput[90]{90}(280,235){\textsc{delete}}
	
	% Server
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](30,65)(150,200)
	\qdisk( 70,200){2pt} \uput[-90]{90}( 70,200){getService}
	\qdisk( 88,200){2pt} \uput[-90]{90}( 87,200){addEnvironment}
	\qdisk(121,200){2pt} \uput[-90]{90}(120,200){removeEnvironment}
	\uput[90](90,100){Server Node}
	
	% Server ROSLaunch
	\psframe[framearc=1, cornersize=absolute, linearc=10pt, linestyle=dashed](50,70)(130,100)
	\uput[90](90,82){ROSLaunch}
	\uput[-90](90,88){(scriptapi)}
	
	% Server ROSLaunch arrows
	\psline[linewidth=0.6pt, linestyle=dashed, arrows=->, arrowlength=2](130,85)(190,85)
	
	% Server Service arrows
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2]( 70,235)( 70,201)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2]( 88,235)( 88,201)
	\psline[linewidth=0.6pt](195,235)(195,220)
	\psline[linewidth=0.6pt](195,220)(121,220)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](121,220)(121,201)
	
	% Environment
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](190,65)(310,200)
	\qdisk(210,200){2pt} \uput[-90]{90}(210,200){getEnvironment}
	\qdisk(225,200){2pt} \uput[-90]{90}(224,200){addTask}
	\qdisk(243,200){2pt} \uput[-90]{90}(242,200){addNode}
	\qdisk(260,200){2pt} \uput[-90]{90}(260,200){getTask}
	\qdisk(280,200){2pt} \uput[-90]{90}(279,200){removeTask}
	\qdisk(190,125){2pt} \uput[0](190,125){isActive}
	\uput[90](250,100){Environment Node \textsc{A}}
	
	% Environment Service arrows
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](210,235)(210,201)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](225,235)(225,201)
	\psline[linewidth=0.6pt]( 92,235)( 92,210)
	\psline[linewidth=0.6pt]( 92,210)(243,210)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](243,210)(243,201)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](260,235)(260,201)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](280,235)(280,201)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](150,125)(189,125)
	
	% Environment ROSLaunch
	\psframe[framearc=1, cornersize=absolute, linearc=10pt, linestyle=dashed](210,70)(290,100)
	\uput[90](250,82){ROSLaunch}
	\uput[-90](250,88){(scriptapi)}
	
	% Node A
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](50,10)(120,40)
	\qdisk(85,40){2pt}
	\uput[90](85,15){Node \textsc{A/a}}
	
	% Node B
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](150,10)(220,40)
	\qdisk(185,40){2pt}
	\uput[90](185,15){Node \textsc{A/b}}
	
	% Node C
	\psframe[framearc=1, cornersize=absolute, linearc=10pt](250,10)(320,40)
	\qdisk(285,40){2pt}
	\uput[90](285,15){Node \textsc{A/c}}
	
	% Environment ROSLaunch arrows
	\psline[linewidth=0.6pt, linestyle=dashed](260,70)(260,50)
	\psline[linewidth=0.6pt, linestyle=dashed]( 70,50)(270,50)
	\psline[linewidth=0.6pt, linestyle=dashed, arrows=->, arrowlength=2]( 70,50)( 70,40)
	\psline[linewidth=0.6pt, linestyle=dashed, arrows=->, arrowlength=2](170,50)(170,40)
	\psline[linewidth=0.6pt, linestyle=dashed, arrows=->, arrowlength=2](270,50)(270,40)
	
	% Environment Service arrows
	\psline[linewidth=0.6pt](240,65)(240,55)
	\psline[linewidth=0.6pt]( 85,55)(285,55)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2]( 85,55)( 85,41)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](185,55)(185,41)
	\psline[linewidth=0.6pt, arrows=->, arrowlength=2](285,55)(285,41)
	
	% Namespace boundary
	\psline[linestyle=dotted]( 40,  5)(330,  5)
	\psline[linestyle=dotted]( 40, 60)(170, 60)
	\psline[linestyle=dotted](170,215)(330,215)
	\psline[linestyle=dotted]( 40,  5)( 40, 60)
	\psline[linestyle=dotted](170, 60)(170,215)
	\psline[linestyle=dotted](330,  5)(330,215)
	\uput[-135]{90}(330,215){Namespace \textsc{A}}
	
\end{small}
}
\end{pspicture}